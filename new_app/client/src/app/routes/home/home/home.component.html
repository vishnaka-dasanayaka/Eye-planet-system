<div class="min-h-screen bg-gray-50 p-6 md:p-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800">Dashboard</h1>

    <div class="mt-2 flex items-center text-gray-600">
      <span>
        Welcome back, {{ sysuser?.firstname }} {{ sysuser?.lastname }} !
      </span>

      <span class="mx-2">â€¢</span>

      <span>
        <p-skeleton
          *ngIf="!data_loaded"
          width="100px"
          height="1rem"
        ></p-skeleton>

        <span *ngIf="data_loaded">
          Last login :
          {{ last_login?.timestamp | date : "medium" }}
        </span>
      </span>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
    <!-- Text Blocks Card -->
    <div
      class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 border-l-emerald-500 border-l-5"
    >
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500 text-sm">Total Patients</p>
          <p class="text-3xl font-bold text-gray-800 mt-2">
            <span *ngIf="!data_loaded"
              ><i class="fa-solid fa-spinner fa-spin-pulse"></i
            ></span>
            <span *ngIf="data_loaded">
              {{ counts.active_patient_count }}
            </span>
          </p>
        </div>
        <div
          class="w-12 h-12 rounded-lg bg-emerald-50 flex items-center justify-center"
        >
          <i class="fa-solid fa-eye-low-vision text-emerald-500"></i>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t border-gray-100">
        <div class="flex items-center text-sm">
          <i
            *ngIf="patient_trend?.trend === 'increase'"
            class="fa-solid fa-arrow-trend-up mr-2 text-green-600"
          ></i>

          <i
            *ngIf="patient_trend?.trend === 'decrease'"
            class="fa-solid fa-arrow-trend-down mr-2 text-red-600"
          ></i>

          <i
            *ngIf="patient_trend?.trend === 'nochange'"
            class="fa-solid fa-minus mr-2 text-cyan-600"
          ></i>

          <span
            [ngClass]="{
              'text-green-600': patient_trend?.trend === 'increase',
              'text-red-600': patient_trend?.trend === 'decrease',
              'text-cyan-600': patient_trend?.trend === 'nochange'
            }"
          >
            {{ patient_trend?.trend === "decrease" ? "-" : "+" }}
            {{ patient_trend?.percentage }}% from last month
          </span>
        </div>
      </div>
    </div>

    <!-- Active Snapfires Card -->
    <div
      class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 border-l-purple-500 border-l-5"
    >
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500 text-sm">Active Orders</p>
          <p class="text-3xl font-bold text-gray-800 mt-2">
            <span *ngIf="!data_loaded">
              <i class="fa-solid fa-spinner fa-spin-pulse"></i>
            </span>
            <span *ngIf="data_loaded">
              {{ counts.active_order_count }}
            </span>
          </p>
        </div>
        <div
          class="w-12 h-12 rounded-lg bg-purple-50 flex items-center justify-center"
        >
          <i class="fa-solid text-purple-500 fa-glasses"></i>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t border-gray-100">
        <div class="flex items-center text-sm">
          <i
            *ngIf="order_trend?.trend === 'increase'"
            class="fa-solid fa-arrow-trend-up mr-2 text-green-600"
          ></i>

          <i
            *ngIf="order_trend?.trend === 'decrease'"
            class="fa-solid fa-arrow-trend-down mr-2 text-red-600"
          ></i>

          <i
            *ngIf="order_trend?.trend === 'nochange'"
            class="fa-solid fa-minus mr-2 text-cyan-600"
          ></i>

          <span
            [ngClass]="{
              'text-green-600': order_trend?.trend === 'increase',
              'text-red-600': order_trend?.trend === 'decrease',
              'text-cyan-600': order_trend?.trend === 'nochange'
            }"
          >
            {{ order_trend?.trend === "decrease" ? "-" : "+" }}
            {{ order_trend?.percentage }}% from last month
          </span>
        </div>
      </div>
    </div>

    <!-- Inventory Value Card -->
    <div
      class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 border-l-cyan-500 border-l-5"
    >
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500 text-sm">Consultations</p>
          <p class="text-3xl font-bold text-gray-800 mt-2">
            <span *ngIf="!data_loaded"
              ><i class="fa-solid fa-spinner fa-spin-pulse"></i
            ></span>
            <span *ngIf="data_loaded">
              {{ counts.active_invoice_count }}
            </span>
          </p>
        </div>
        <div
          class="w-12 h-12 rounded-lg bg-cyan-50 flex items-center justify-center"
        >
          <i class="fa-solid text-cyan-500 fa-stethoscope"></i>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t border-gray-100">
        <div class="flex items-center text-sm">
          <i
            *ngIf="invoice_trend?.trend === 'increase'"
            class="fa-solid fa-arrow-trend-up mr-2 text-green-600"
          ></i>

          <i
            *ngIf="invoice_trend?.trend === 'decrease'"
            class="fa-solid fa-arrow-trend-down mr-2 text-red-600"
          ></i>

          <i
            *ngIf="invoice_trend?.trend === 'nochange'"
            class="fa-solid fa-minus mr-2 text-cyan-600"
          ></i>

          <span
            [ngClass]="{
              'text-green-600': invoice_trend?.trend === 'increase',
              'text-red-600': invoice_trend?.trend === 'decrease',
              'text-cyan-600': invoice_trend?.trend === 'nochange'
            }"
          >
            {{ invoice_trend?.trend === "decrease" ? "-" : "+" }}
            {{ invoice_trend?.percentage }}% from last month
          </span>
        </div>
      </div>
    </div>

    <div
      *hasPermission="[[12], sysuser]"
      class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 border-l-pink-500 border-l-5 bg-"
    >
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500 text-sm">Available Stock Buying Value</p>
          <p class="text-xl font-bold text-gray-800 mt-2">
            <span *ngIf="!data_loaded"
              ><i class="fa-solid fa-spinner fa-spin-pulse"></i
            ></span>
            <span *ngIf="data_loaded">
              LKR {{ inventory_value.buying_value | number : "2.2" }}
            </span>
          </p>
        </div>
        <div
          class="w-12 h-12 rounded-lg bg-pink-50 flex items-center justify-center"
        >
          <i class="fa-solid text-pink-500 fa-dollar-sign"></i>
        </div>
      </div>
    </div>

    <div
      *hasPermission="[[12], sysuser]"
      class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 border-l-green-500 border-l-5"
    >
      <div class="flex justify-between items-start">
        <div>
          <p class="text-gray-500 text-sm">Available Stock Selling Value</p>
          <p class="text-xl font-bold text-gray-800 mt-2">
            <span *ngIf="!data_loaded"
              ><i class="fa-solid fa-spinner fa-spin-pulse"></i
            ></span>
            <span *ngIf="data_loaded">
              LKR {{ inventory_value.selling_value | number : "2.2" }}
            </span>
          </p>
        </div>
        <div
          class="w-12 h-12 rounded-lg bg-green-50 flex items-center justify-center"
        >
          <i class="fa-solid fa-sack-dollar text-green-500"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Secondary Stats Row -->
  <div class="grid grid-cols-2 md:grid-cols-6 gap-4 mb-10">
    <div class="bg-white rounded-lg p-4 text-center border border-gray-100">
      <p class="text-gray-500 text-sm">Suppliers</p>
      <p class="text-2xl font-bold text-gray-800 mt-1">
        <span *ngIf="!data_loaded"
          ><i class="fa-solid fa-spinner fa-spin-pulse"></i
        ></span>
        <span *ngIf="data_loaded">
          {{ counts.active_supplier_count }}
        </span>
      </p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center border border-gray-100">
      <p class="text-gray-500 text-sm">Users</p>
      <p class="text-2xl font-bold text-gray-800 mt-1">
        <span *ngIf="!data_loaded"
          ><i class="fa-solid fa-spinner fa-spin-pulse"></i
        ></span>
        <span *ngIf="data_loaded">
          {{ counts.active_user_count }}
        </span>
      </p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center border border-gray-100">
      <p class="text-gray-500 text-sm">Branches</p>
      <p class="text-2xl font-bold text-gray-800 mt-1">
        <span *ngIf="!data_loaded"
          ><i class="fa-solid fa-spinner fa-spin-pulse"></i
        ></span>
        <span *ngIf="data_loaded">
          {{ counts.active_branch_count }}
        </span>
      </p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center border border-gray-100">
      <p class="text-gray-500 text-sm">Purchase Orders</p>
      <p class="text-2xl font-bold text-gray-800 mt-1">
        <span *ngIf="!data_loaded"
          ><i class="fa-solid fa-spinner fa-spin-pulse"></i
        ></span>
        <span *ngIf="data_loaded">
          {{ counts.active_po_count }}
        </span>
      </p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center border border-gray-100">
      <p class="text-gray-500 text-sm">Brands</p>
      <p class="text-2xl font-bold text-gray-800 mt-1">
        <span *ngIf="!data_loaded"
          ><i class="fa-solid fa-spinner fa-spin-pulse"></i
        ></span>
        <span *ngIf="data_loaded">
          {{ counts.active_brand_count }}
        </span>
      </p>
    </div>
    <div class="bg-white rounded-lg p-4 text-center border border-gray-100">
      <p class="text-gray-500 text-sm">Models</p>
      <p class="text-2xl font-bold text-gray-800 mt-1">
        <span *ngIf="!data_loaded"
          ><i class="fa-solid fa-spinner fa-spin-pulse"></i
        ></span>
        <span *ngIf="data_loaded">
          {{ counts.active_model_count }}
        </span>
      </p>
    </div>
  </div>

  <!-- <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10">
    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-gray-800">Top 5 Brands by Units</h2>
        <button
          class="text-[#ff820d] hover:text-orange-700 text-sm font-medium"
        >
          View Details
        </button>
      </div>
      <div class="space-y-5">
        <div>
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium text-gray-700">Apple</span>
            <span class="text-sm font-medium text-gray-700">42%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-[#ff820d] h-2.5 rounded-full"
              style="width: 42%"
            ></div>
          </div>
        </div>
        <div>
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium text-gray-700">Samsung</span>
            <span class="text-sm font-medium text-gray-700">35%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-[#ff820d] h-2.5 rounded-full"
              style="width: 35%"
            ></div>
          </div>
        </div>
        <div>
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium text-gray-700">Google</span>
            <span class="text-sm font-medium text-gray-700">22%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-[#ff820d] h-2.5 rounded-full"
              style="width: 22%"
            ></div>
          </div>
        </div>
        <div>
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium text-gray-700">OnePlus</span>
            <span class="text-sm font-medium text-gray-700">15%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-[#ff820d] h-2.5 rounded-full"
              style="width: 15%"
            ></div>
          </div>
        </div>
        <div>
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium text-gray-700">Xiaomi</span>
            <span class="text-sm font-medium text-gray-700">10%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div
              class="bg-[#ff820d] h-2.5 rounded-full"
              style="width: 10%"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-gray-800">
          Stock Distribution by Category
        </h2>
        <button
          class="text-[#ff820d] hover:text-orange-700 text-sm font-medium"
        >
          View Details
        </button>
      </div>
      <div class="flex items-center justify-center h-64">
        <div class="relative w-48 h-48">
          <div
            class="absolute inset-0 rounded-full border-8 border-[#ff820d]"
          ></div>
          <div
            class="absolute inset-4 rounded-full border-8 border-orange-300"
          ></div>
          <div
            class="absolute inset-8 rounded-full border-8 border-orange-200"
          ></div>
          <div
            class="absolute inset-12 rounded-full border-8 border-orange-100"
          ></div>
          <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center">
              <p class="text-2xl font-bold text-gray-800">100%</p>
              <p class="text-gray-500 text-sm">Total Stock</p>
            </div>
          </div>
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4 mt-6">
        <div class="flex items-center">
          <div class="w-3 h-3 rounded-full bg-[#ff820d] mr-2"></div>
          <span class="text-sm text-gray-700">Smartphones (45%)</span>
        </div>
        <div class="flex items-center">
          <div class="w-3 h-3 rounded-full bg-orange-300 mr-2"></div>
          <span class="text-sm text-gray-700">Tablets (25%)</span>
        </div>
        <div class="flex items-center">
          <div class="w-3 h-3 rounded-full bg-orange-200 mr-2"></div>
          <span class="text-sm text-gray-700">Laptops (20%)</span>
        </div>
        <div class="flex items-center">
          <div class="w-3 h-3 rounded-full bg-orange-100 mr-2"></div>
          <span class="text-sm text-gray-700">Accessories (10%)</span>
        </div>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-gray-800">
          Inventory Value Trend (Last 30 Days)
        </h2>
        <button
          class="text-[#ff820d] hover:text-orange-700 text-sm font-medium"
        >
          View Report
        </button>
      </div>
      <div class="h-64 flex items-end space-x-2 pt-8">
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-orange-100 rounded-t" style="height: 40%"></div>
          <div class="text-xs text-gray-500 mt-1">Mon</div>
        </div>
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-orange-200 rounded-t" style="height: 60%"></div>
          <div class="text-xs text-gray-500 mt-1">Tue</div>
        </div>
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-orange-300 rounded-t" style="height: 80%"></div>
          <div class="text-xs text-gray-500 mt-1">Wed</div>
        </div>
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-[#ff820d] rounded-t" style="height: 100%"></div>
          <div class="text-xs text-gray-500 mt-1">Thu</div>
        </div>
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-orange-300 rounded-t" style="height: 85%"></div>
          <div class="text-xs text-gray-500 mt-1">Fri</div>
        </div>
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-orange-200 rounded-t" style="height: 70%"></div>
          <div class="text-xs text-gray-500 mt-1">Sat</div>
        </div>
        <div class="flex-1 flex flex-col items-center">
          <div class="w-full bg-orange-100 rounded-t" style="height: 55%"></div>
          <div class="text-xs text-gray-500 mt-1">Sun</div>
        </div>
      </div>
      <div class="mt-8 pt-6 border-t border-gray-100">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-500 text-sm">Current Value</p>
            <p class="text-2xl font-bold text-gray-800">$2.1M</p>
          </div>
          <div class="text-right">
            <p class="text-gray-500 text-sm">30-Day Change</p>
            <p class="text-2xl font-bold text-green-600">+24%</p>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-gray-800">Recently Added Stocks</h2>
        <button
          class="text-[#ff820d] hover:text-orange-700 text-sm font-medium"
        >
          View All
        </button>
      </div>
      <div class="space-y-6">
        <div
          class="flex items-center justify-between p-4 bg-orange-50 rounded-lg"
        >
          <div class="flex items-center">
            <div
              class="w-10 h-10 rounded-lg bg-[#ff820d] flex items-center justify-center mr-4"
            >
              <span class="text-white font-bold">A</span>
            </div>
            <div>
              <p class="font-medium text-gray-800">STK-00123</p>
              <p class="text-sm text-gray-600">Apple iPhone 16 Pro</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-gray-500 text-sm">Added</p>
            <p class="font-medium text-gray-800">2020</p>
          </div>
        </div>

        <div
          class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"
        >
          <div class="flex items-center">
            <div
              class="w-10 h-10 rounded-lg bg-gray-600 flex items-center justify-center mr-4"
            >
              <span class="text-white font-bold">S</span>
            </div>
            <div>
              <p class="font-medium text-gray-800">STK-00254</p>
              <p class="text-sm text-gray-600">Samsung Galaxy 323</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-gray-500 text-sm">Added</p>
            <p class="font-medium text-gray-800">2020</p>
          </div>
        </div>

        <div
          class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"
        >
          <div class="flex items-center">
            <div
              class="w-10 h-10 rounded-lg bg-blue-600 flex items-center justify-center mr-4"
            >
              <span class="text-white font-bold">G</span>
            </div>
            <div>
              <p class="font-medium text-gray-800">STK-00389</p>
              <p class="text-sm text-gray-600">Google Pixel 9 Pro</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-gray-500 text-sm">Added</p>
            <p class="font-medium text-gray-800">2021</p>
          </div>
        </div>

        <div
          class="flex items-center justify-between p-4 bg-gray-50 rounded-lg"
        >
          <div class="flex items-center">
            <div
              class="w-10 h-10 rounded-lg bg-red-600 flex items-center justify-center mr-4"
            >
              <span class="text-white font-bold">O</span>
            </div>
            <div>
              <p class="font-medium text-gray-800">STK-00472</p>
              <p class="text-sm text-gray-600">OnePlus 12</p>
            </div>
          </div>
          <div class="text-right">
            <p class="text-gray-500 text-sm">Added</p>
            <p class="font-medium text-gray-800">2022</p>
          </div>
        </div>
      </div>
    </div>
  </div> -->
</div>
